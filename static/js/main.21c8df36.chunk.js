(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a(44)},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(21),s=a.n(l),o=(a(30),a(14)),i=a(2),c=a(3),u=a(10),h=a(9),m=a(4),y=a(11),d=function(e){var t="";return e.player&&(t+="filled player".concat(e.player)),e.winner&&(t+=" winner"),r.a.createElement("div",{className:"board-slot ".concat(t),onClick:function(){return e.onSlotClick(e.index)}})},p=(a(31),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).slots=Array(9).fill(0,0,9),a.slotClick_=a.handleSlotClick_.bind(Object(m.a)(a)),a}return Object(y.a)(t,e),Object(c.a)(t,[{key:"handleSlotClick_",value:function(e){this.props.onSlotClick(e)}},{key:"renderSlots_",value:function(){var e=this,t=this.props,a=t.filledSlots,n=t.winnerSlots;return this.slots.map(function(t,l){return r.a.createElement(d,{key:l,winner:n.includes(l),player:a.get(l),index:l,onSlotClick:e.slotClick_})})}},{key:"render",value:function(){return r.a.createElement("div",{className:"board"},this.renderSlots_())}}]),t}(n.PureComponent)),_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"gameLeaderBoard",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"[]";Object(i.a)(this,e),this.storageName=t,localStorage.getItem(t)||localStorage.setItem(t,a)}return Object(c.a)(e,[{key:"getData",value:function(){return JSON.parse(localStorage.getItem(this.storageName))}},{key:"update",value:function(e){localStorage.setItem(this.storageName,JSON.stringify(e))}}]),e}(),f=a(8),g=(a(32),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).hasNoPlayers_()&&a.setPlayersFromURL_(),a.state={filledSlots:new Map(a.props.game.getBoard()),winnerSlots:[]},a.props.game.onGameEnd=a.onGameEnd_.bind(Object(m.a)(a)),a.storage_=new _,a.onSlotClick_=a.handleSlotClick_.bind(Object(m.a)(a)),a}return Object(y.a)(t,e),Object(c.a)(t,[{key:"setPlayersFromURL_",value:function(){var e=this.props.match.params,t=e.firstPlayer,a=e.secondPlayer;this.props.game.playersManager_.addPlayer(t),this.props.game.playersManager_.addPlayer(a)}},{key:"hasNoPlayers_",value:function(){return this.props.game.playersManager_.checkErros().some(function(e){return"no_players"===e.code})}},{key:"onGameEnd_",value:function(e){if(e){var t=this.storage_.getData();this.storage_.update([e.player.name].concat(Object(o.a)(t))),this.setState({winnerSlots:e.slots,winner:e})}}},{key:"handleSlotClick_",value:function(e){this.state.winnerSlots.length>0||(this.props.game.fillSlot(e),this.setState({filledSlots:new Map(this.props.game.getBoard())}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"tic-tac-toe-app"},r.a.createElement(p,{winnerSlots:this.state.winnerSlots,filledSlots:this.state.filledSlots,onSlotClick:this.onSlotClick_}),r.a.createElement(f.b,{className:"button new-game-button",to:"/"},"New game"),r.a.createElement("div",{className:"app-footer"},function(){if(e.state.winner)return r.a.createElement("p",{className:"winner-message"},"Congratulations ",e.state.winner.player.name,". ",r.a.createElement(f.b,{to:"/leaderboard"},"See leaderboard"))}()))}}]),t}(n.Component)),v=(a(41),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).props.game.clearBoard(),a.onPlayerTwoNameChange_=a.onPlayerTwoNameChange_.bind(Object(m.a)(a)),a.onPlayerOneNameChange_=a.onPlayerOneNameChange_.bind(Object(m.a)(a)),a.onFormSubmit_=a.onFormSubmit_.bind(Object(m.a)(a)),a.state={playerOneName:"",playerTwoName:""},a}return Object(y.a)(t,e),Object(c.a)(t,[{key:"disableForm_",value:function(){var e=this.state,t=e.playerOneName,a=e.playerTwoName;return!t||!a||t===a}},{key:"onFormSubmit_",value:function(e){e.preventDefault();var t=this.state,a=t.playerOneName,n=t.playerTwoName;this.props.game.playersManager_.checkErros().lenght||this.props.history.push("/firstPlayer/".concat(a,"/secondPlayer/").concat(n))}},{key:"onPlayerOneNameChange_",value:function(e){this.setState({playerOneName:e.target.value})}},{key:"onPlayerTwoNameChange_",value:function(e){this.setState({playerTwoName:e.target.value})}},{key:"render",value:function(){var e=this.disableForm_();return r.a.createElement("div",{className:"tic-tac-toe-app"},r.a.createElement("div",{className:"setup-page"},r.a.createElement("div",{className:"collumn"},r.a.createElement("div",{className:"player"},r.a.createElement("div",{className:"icon-x"})),r.a.createElement("input",{type:"text",value:this.state.playerOneName,placeholder:"Player one",onChange:this.onPlayerOneNameChange_,id:"playerOne"})),r.a.createElement("div",{className:"collumn"},r.a.createElement("div",{className:"player"},r.a.createElement("div",{className:"icon-circle"})),r.a.createElement("input",{type:"text",value:this.state.playerTwoName,placeholder:"Player two",onChange:this.onPlayerTwoNameChange_,id:"playerTwo"}))),r.a.createElement("button",{disabled:e,onClick:this.onFormSubmit_}," Start! "))}}]),t}(n.Component)),b=(a(42),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(y.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=(new _).getData();this.setState({leaderBoard:e})}},{key:"renderWinnerMessage_",value:function(){var e=this.props.match.params.winner;return e?r.a.createElement("div",null,r.a.createElement("p",null,"Congratulations, ",r.a.createElement("strong",null,e),"!!! Now you are in our leaderboard."),r.a.createElement("p",null,"Are you ready to ",r.a.createElement("button",{type:"button",onClick:this.props.history.goBack},"play again")," aganst you partner or start a",r.a.createElement(f.b,{to:"/"},"new game"),"?")):r.a.createElement("div",null,r.a.createElement("p",null,"We do not have leaders to how. Why don't you ",r.a.createElement(f.b,{to:"/"},"play")," to see if you can put your name here?"),r.a.createElement(f.b,{to:"/"},"New game"))}},{key:"render",value:function(){var e=this.state.leaderBoard;return r.a.createElement("div",{className:"leader-board"},r.a.createElement("h1",null,"Leaderboard"),this.renderWinnerMessage_(),r.a.createElement("ul",null,e.map(function(e,t){return r.a.createElement("li",{key:t},e)})))}}]),t}(n.Component)),k=function e(t){Object(i.a)(this,e),this.id=t.id,this.name=t.name||"",this.class=t.class||""},E=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(i.a)(this,e),this.erros_=[],this.players_=[],this.currentPlayerIndex_=0,this.createPlayers_(t)}return Object(c.a)(e,[{key:"addPlayer",value:function(e){if(!e)throw Error("Player configuration should be informed");var t={name:e,id:this.players_.length+1,class:"player"+this.players_.length+1};this.players_.push(new k(t))}},{key:"checkErros",value:function(){return this.erros_=[],this.players_.length?(this.players_[0].name.toLowerCase()===this.players_[1].name.toLowerCase()&&this.erros_.push({code:"duplicated_names"}),this.erros_):(this.erros_.push({code:"no_players"}),this.erros_)}},{key:"createPlayers_",value:function(e){this.players_=e.map(function(e){return new k(e)})}},{key:"getCurrentPlayer",value:function(){return this.players_[this.currentPlayerIndex_]}},{key:"getPlayers",value:function(){return Object(o.a)(this.players_)}},{key:"nextPlayerTurn",value:function(){var e=this.currentPlayerIndex_;return++e>=this.players_.length&&(e=0),this.switchPlayer(e)}},{key:"switchPlayer",value:function(e){if(0!==e&&this.players_.length<e)throw Error("Player not found");return this.currentPlayerIndex_=e,this.players_[e]}}]),e}(),S=a(24),w=function(){function e(t,a,n){Object(i.a)(this,e),this.board_=new Map,this.onGameEnd=n,this.playersManager_=new E,t&&a&&(this.playersManager_.addPlayer(t),this.playersManager_.addPlayer(a))}return Object(c.a)(e,[{key:"checkSlots_",value:function(e,t){if(!(e.length<3))return this.checkSlot_(e[0],t)&&this.checkSlot_(e[1],t)&&this.checkSlot_(e[2],t)?e:void 0}},{key:"checkColumns_",value:function(e){return this.checkSlots_([0,3,6],e)||this.checkSlots_([1,4,7],e)||this.checkSlots_([2,5,8],e)}},{key:"checkDiagonalUpLeft_",value:function(e){return this.checkSlots_([0,4,8],e)}},{key:"checkDiagonalUpRight_",value:function(e){return this.checkSlots_([2,4,6],e)}},{key:"checkLines_",value:function(e){return this.checkSlots_([0,1,2],e)||this.checkSlots_([3,4,5],e)||this.checkSlots_([6,7,8],e)}},{key:"checkSlot_",value:function(e,t){return this.board_.get(e)===t}},{key:"onEndGame_",value:function(e){if(Object(S.isFunction)(this.onGameEnd))return this.onGameEnd(e)}},{key:"fillSlot",value:function(e){var t=this.playersManager_.getCurrentPlayer();if(!this.board_.get(e)){if(this.board_.size<9){var a=t;this.board_.set(e,a.id)}var n=this.getWinner_();n||9===this.board_.size?this.onEndGame_(n):this.playersManager_.nextPlayerTurn()}}},{key:"getBoard",value:function(){return this.board_}},{key:"clearBoard",value:function(){this.board_.clear()}},{key:"getWinner_",value:function(){var e=this.playersManager_.getCurrentPlayer(),t=e.id,a=this.checkLines_(t)||this.checkColumns_(t)||this.checkDiagonalUpLeft_(t)||this.checkDiagonalUpRight_(t);if(a)return{player:e,slots:a}}}]),e}(),O=a(12),P=new w;s.a.render(r.a.createElement(function(){return r.a.createElement(f.a,{basename:"/react-tic-tac-toe"},r.a.createElement("div",null,r.a.createElement(O.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(v,Object.assign({},e,{game:P}))}}),r.a.createElement(O.a,{path:"/firstPlayer/:firstPlayer/secondPlayer/:secondPlayer",render:function(e){return r.a.createElement(g,Object.assign({},e,{game:P}))}}),r.a.createElement(O.a,{path:"/leaderboard",render:function(e){return r.a.createElement(b,Object.assign({},e,{game:P}))}})))},null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.21c8df36.chunk.js.map